@model System.Collections.IEnumerable

@Html.DevExpress().TreeList(settings =>
{
    settings.Name = "TreeList";
    settings.KeyFieldName = "MenuID";
    settings.ParentFieldName = "ParentId";
    settings.CallbackRouteValues = new { Controller = "Menu", Action = "TreeListPartial" };
    settings.SettingsEditing.AddNewNodeRouteValues = new { Controller = "Menu", Action = "TreeListAddNewPartial" };
    settings.SettingsEditing.UpdateNodeRouteValues = new { Controller = "Menu", Action = "TreeListUpdatePartial" };
    settings.SettingsEditing.NodeDragDropRouteValues = new { Controller = "Menu", Action = "TreeListMovePartial" };
    settings.SettingsEditing.DeleteNodeRouteValues = new { Controller = "Menu", Action = "TreeListDeletePartial" };

    settings.SettingsBehavior.AllowFocusedNode = true;

    settings.CommandColumn.Visible = true;
    settings.CommandColumn.EditButton.Visible = true;
    settings.CommandColumn.NewButton.Visible = true;
    settings.CommandColumn.DeleteButton.Visible = true;

    settings.Columns.Add("NameMon");
    settings.Columns.Add("NameEng");
    settings.Columns.Add("MenuType", MVCxTreeListColumnType.ComboBox);
    settings.Columns.Add("NavigateUrl");
    settings.Columns.Add("Image",MVCxTreeListColumnType.Image);
    settings.Columns.Add("MenuID", MVCxTreeListColumnType.SpinEdit);
    settings.Columns.Add("ParentId", MVCxTreeListColumnType.SpinEdit);

    settings.CellEditorInitialize += (s, e) =>
    {
        MVCxTreeList treeList = (MVCxTreeList)s;
        if (e.Column.FieldName == "MenuType")
        {
            ASPxComboBox cb = (ASPxComboBox)e.Editor;
            cb.Items.Add("Нэг баганаар", "Single");
            cb.Items.Add("Олон баганаар", "Multi");
        }
        else if (e.Column.FieldName == "MenuID")
        {
            e.Column.ReadOnly = true;
        }
    };
    settings.PreRender = (s, e) =>
    {
        MVCxTreeList treeList = (MVCxTreeList)s;
        treeList.ExpandAll();
    };
}).SetEditErrorText((string)ViewData["EditError"]).Bind(Model).GetHtml()
