@model System.Collections.IEnumerable

@Html.DevExpress().TreeList(settings =>
{
    settings.Name = "TreeList";
    settings.KeyFieldName = "MenuID";
    settings.ParentFieldName = "ParentId";
    settings.CallbackRouteValues = new { Controller = "Menu", Action = "TreeListPartial" };
    settings.SettingsEditing.AddNewNodeRouteValues = new { Controller = "Menu", Action = "TreeListAddNewPartial" };
    settings.SettingsEditing.UpdateNodeRouteValues = new { Controller = "Menu", Action = "TreeListUpdatePartial" };
    settings.SettingsEditing.NodeDragDropRouteValues = new { Controller = "Menu", Action = "TreeListMovePartial" };
    settings.SettingsEditing.DeleteNodeRouteValues = new { Controller = "Menu", Action = "TreeListDeletePartial" };

    settings.SettingsBehavior.AllowFocusedNode = true;

    settings.CommandColumn.Visible = true;
    settings.CommandColumn.EditButton.Visible = true;
    settings.CommandColumn.EditButton.Text = "Засах";
    settings.CommandColumn.DeleteButton.Visible = true;
    settings.CommandColumn.DeleteButton.Text = "Устгах";
    settings.CommandColumn.NewButton.Visible = true;
    settings.CommandColumn.NewButton.Text = "Дэд";
    settings.CommandColumn.UpdateButton.Text = "Хадгалах";
    settings.CommandColumn.CancelButton.Text = "Болих";
    
    settings.Columns.Add("NameMon", "Нэр (Монгол)");
    settings.Columns.Add("NameEng", "Нэр (Англи)");
    settings.Columns.Add("MenuType", "Төрөл", MVCxTreeListColumnType.ComboBox);
    settings.Columns.Add("NavigateUrl","Линк");
    //settings.Columns.Add("Image","", MVCxTreeListColumnType.ComboBox);
    settings.Columns.Add(column =>
    {
        column.FieldName = "BranchID";
        column.EditFormSettings.Visible = DefaultBoolean.True;
        column.ColumnType = MVCxTreeListColumnType.ComboBox;

        var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
        comboBoxProperties.DataSource = DXWebMRCS.Models.NorthwindDataProvider.GetBranchs();
        comboBoxProperties.ValueField = "BranchID";
        comboBoxProperties.TextFormatString = "{0} - {1}";
        comboBoxProperties.TextField = "NameMon";
        comboBoxProperties.Columns.Add("NameMon", "Монгол");
        comboBoxProperties.Columns.Add("NameEng", "English");
        comboBoxProperties.ValueType = typeof(int);
    });

    settings.CellEditorInitialize += (s, e) =>
    {
        MVCxTreeList treeList = (MVCxTreeList)s;
        if (e.Column.FieldName == "MenuType")
        {
            ASPxComboBox cb = (ASPxComboBox)e.Editor;
            cb.Items.Add("Нэг баганаар", "Single");//, "https://quwa.org/wp-content/uploads/2016/10/TAI-Anka-01-TAI-692x360.png");
            cb.Items.Add("Олон баганаар", "Multi");//, "https://quwa.org/wp-content/plugins/accesspress-social-icons/icon-sets/png/set7/facebook.png");
        }
        else if (e.Column.FieldName == "Image")
        {
            ASPxComboBox cb = (ASPxComboBox)e.Editor;
            cb.Items.Add("about.svg", "about.svg", "https://marketplace.canva.com/MAB7k1mbVlU/1/thumbnail/canva-png-file-icon-MAB7k1mbVlU.png");
            cb.Items.Add("accept_database.svg", "accept_database.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/accept_database.svg");
            cb.Items.Add("add_column.svg", "add_column.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/add_column.svg");
            cb.Items.Add("add_database.svg", "add_database.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/add_database.svg");
            cb.Items.Add("add_image.svg", "add_image.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/add_image.svg");
            cb.Items.Add("add_row.svg", "add_row.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/add_row.svg");
            cb.Items.Add("address_book.svg", "address_book.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/address_book.svg");
            cb.Items.Add("advance.svg", "advance.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/advance.svg");
            cb.Items.Add("advertising.svg", "advertising.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/advertising.svg");
            cb.Items.Add("alarm_clock.svg", "alarm_clock.svg", "http://localhost:4659/Content/Images/flat-color-icons-svg/alarm_clock.svg");
        }
    };
    settings.PreRender = (s, e) =>
    {
        MVCxTreeList treeList = (MVCxTreeList)s;
        treeList.ExpandAll();
    };
}).SetEditErrorText((string)ViewData["EditError"]).Bind(Model).GetHtml()
